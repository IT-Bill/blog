---
import Layout from '@/layouts/Layout.astro';
import { getCollection } from 'astro:content';
import type { Post } from '@/types';
import { CategoriesList } from '@/components/CategoriesList';

// 获取所有文章
const allPosts = await getCollection('posts');
const posts: Post[] = allPosts.map(post => ({
	id: post.id,
	title: post.data.title,
	summary: post.data.summary,
	date: post.data.date,
	category: post.data.category,
	cover: post.data.cover,
	tags: post.data.tags,
})).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
---

<Layout title="分类列表">
	<CategoriesList posts={posts} client:load />
</Layout>
